#! /usr/bin/env node























parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"core/services/args.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var o,s=arguments.length,i=s<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,c);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("typedi");let r=class{setArguments(e){this.args=e}};r=e([t.Service()],r),exports.ArgsService=r;
},{}],"core/services/config.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,o,r){var n,c=arguments.length,i=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(i=(c<3?n(i):c>3?n(t,o,i):n(t,o))||i);return c>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("typedi");class o{}exports.MainConfig=o;class r{}exports.Commands=r;class n extends r{}exports.GapiConfig=n;let c=class{constructor(){this.config=new n}setCustomConfig(e){Object.assign(this.config,e),e||(e={}),e.commands?(e.commands.test&&this.genericError("test"),e.commands.new&&this.genericError("new"),e.commands.schema&&this.genericError("schema"),e.commands.start&&this.genericError("start"),e.commands.stop&&this.genericError("stop")):e.commands={},this.config=e,this.config.config=this.config.config||{},this.config.config.schema=this.config.config.schema||{introspectionEndpoint:"",introspectionOutputFolder:"",pattern:""},this.config.config.app=this.config.config.app||{local:{GAPI_VERSION:""},prod:{GAPI_VERSION:""}}}genericError(e){throw new Error(`You cannot define command "${e}" they are restricted!`)}};c=e([t.Service()],c),exports.ConfigService=c;
},{}],"core/services/environment.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var c,n=arguments.length,l=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(c=e[i])&&(l=(n<3?c(l):n>3?c(t,r,l):c(t,r))||l);return n>3&&l&&Object.defineProperty(t,r,l),l};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("typedi");let r=class{setVariables(e){let t="";const r=Object.keys(e);let o=0;return r.forEach(c=>{o++,r.length===o?t+=`export ${c}=${e[c]}`:t+=`export ${c}=${e[c]} && `}),t}};r=e([t.Service()],r),exports.EnvironmentVariableService=r;
},{}],"core/services/exec.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var o,l=arguments.length,i=l<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,c);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(l<3?o(i):l>3?o(t,r,i):o(t,r))||i);return l>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("typedi"),r=require("shelljs");let c=class{call(e,t){return new Promise((c,o)=>{r.exec(e,t,(e,t,r)=>{0!==e&&o(r),c(t)})})}};c=e([t.Service()],c),exports.ExecService=c;
},{}],"core/helpers/index.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.includes=(e=>process.argv.toString().includes(e)),exports.nextOrDefault=((e,r=!0,s=(e=>e))=>{if(process.argv.toString().includes(e)){const t=process.argv[process.argv.indexOf(e)+1];return t?t.includes("--")?r:s(t):r}return r});
},{}],"tasks/start.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,i,t,r){var s,n=arguments.length,c=n<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,i,t,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(c=(n<3?s(c):n>3?s(i,t,c):s(i,t))||c);return n>3&&c&&Object.defineProperty(i,t,c),c},i=this&&this.__awaiter||function(e,i,t,r){return new(t||(t=Promise))(function(s,n){function c(e){try{l(r.next(e))}catch(i){n(i)}}function o(e){try{l(r.throw(e))}catch(i){n(i)}}function l(e){e.done?s(e.value):new t(function(i){i(e.value)}).then(c,o)}l((r=r.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("typedi"),r=require("../core/services/args.service"),s=require("../core/services/config.service"),n=require("../core/services/environment.service"),c=require("../core/services/exec.service"),o=require("fs"),l=require("parcel-bundler"),a=require("child_process"),g=require("../core/helpers");let d=class{constructor(){this.argsService=t.Container.get(r.ArgsService),this.configService=t.Container.get(s.ConfigService),this.environmentService=t.Container.get(n.EnvironmentVariableService),this.execService=t.Container.get(c.ExecService),this.verbose="",this.quiet=!0}run(e={}){return i(this,void 0,void 0,function*(){if(this.argsService.args.includes("--verbose")&&(this.verbose=" --verbose",this.quiet=!1),this.configService.config.config.app=this.configService.config.config.app||{},this.argsService.args[3]&&this.argsService.args[3].includes("--")){const e=this.argsService.args[3].replace("--",""),i=this.configService.config.config.app[e];i&&i.prototype&&i.prototype===String&&i.includes("extends")?(this.config=this.environmentService.setVariables(this.extendConfig(i)),this.configOriginal=this.extendConfig(i),console.log(`"${e}" configuration loaded!`)):i?(this.config=this.environmentService.setVariables(i),this.configOriginal=i):(this.config=this.environmentService.setVariables(this.configService.config.config.app.local),this.configOriginal=this.configService.config.config.app.local),console.log(`"${e}" configuration loaded!`)}else{const e=this.configService.config.config.app.local;e&&e.prototype&&e.prototype===String&&e.includes("extends")?(this.config=this.environmentService.setVariables(this.extendConfig(e)),this.configOriginal=this.extendConfig(e)):(this.config=this.environmentService.setVariables(this.configService.config.config.app.local),this.configOriginal=this.configService.config.config.app.local),console.log('"local" configuration loaded!')}const i=process.argv[5]?`${process.argv[5]} &&`:"",t=process.cwd(),r=(o.existsSync(`${t}/src/main.ts`),process.argv[4]?process.argv[4].split("--path=")[1]:null),s=o.existsSync(`${t}/${r}`),n=this.argsService.args.toString().includes("--lint");return this.argsService.args.toString().includes("--docker")?yield this.execService.call(`${this.config} && pm2-docker ${t}/${s?r:"process.yml"} --only APP`):this.argsService.args.toString().includes("--pm2")?e.state?yield this.execService.call(`${this.config} && pm2 start ${t}/${s?r:"process.yml"} --only APP`):yield this.execService.call(`${this.config} && pm2 stop ${t}/${s?r:"process.yml"}`):"heroku"===process.env.DEPLOY_PLATFORM?s?yield this.execService.call(`${i} ts-node ${t}/${s?r:"index.ts"}`):yield this.execService.call(`${i} ts-node ${t}/src/main.ts`):process.argv.toString().includes("--parcel")?this.prepareBundler(`${s?`${t}/${s?r:"index.ts"}`:`${t}/src/main.ts`}`,this.configOriginal,!0,!1):yield this.execService.call(`nodemon --watch '${t}/src/**/*.ts' ${this.quiet?"--quiet":""}  --ignore '${this.configService.config.config.schema.introspectionOutputFolder}/' --ignore '${t}/src/**/*.spec.ts' --exec '${this.config} && ${n?"npm run lint &&":""} ${i} ts-node' ${s?`${t}/${s?r:"index.ts"}`:`${t}/src/main.ts`}  ${this.verbose}`)})}prepareBundler(e,t,r=process.argv.toString().includes("--start"),s=!process.argv.toString().includes("--buildOnly=false"),n=!process.argv.toString().includes("--minify=false"),c=(process.argv.toString().includes("--target=browser")?"browser":"node")){return i(this,void 0,void 0,function*(){const o=new l(e,{target:c,outDir:g.nextOrDefault("--outDir","./dist"),minify:n,bundleNodeModules:process.argv.toString().includes("--bundle-modules")});let d=null,u=null;const p=()=>{u.stdout.removeAllListeners("data"),u.stderr.removeAllListeners("data"),u.removeAllListeners("exit"),u.kill()};o.on("buildStart",()=>{u&&p()}),o.on("bundled",e=>d=e),o.on("buildEnd",()=>i(this,void 0,void 0,function*(){if(s&&(process.stdout.write(`Gapi Application build finished! ${e}\n`),process.stdout.write(`Bundle source: ${d.name}`),process.exit(0)),r&&null!==d){if(u&&p(),this.argsService.args.toString().includes("--lint")){let e=!1;try{yield this.execService.call("npm run lint")}catch(i){e=!0}if(e)return}const e=[];this.argsService.args.toString().includes("--inspect-brk")?e.push("--inspect-brk"):this.argsService.args.toString().includes("--inspect")&&e.push("--inspect"),console.log(d.name),process.env=Object.assign(process.env,t),(u=a.spawn("node",[...e,d.name])).stdout.on("data",e=>process.stdout.write(e)),u.stderr.on("data",e=>process.stdout.write(e)),u.on("exit",e=>{console.log(`Child process exited with code ${e}`),u=null})}d=null})),o.bundle()})}extendConfig(e){const i=e.split(" ")[1].split("/"),t=this.configService.config.config[i[0]][i[1]];if(!t)throw new Error(`Cannot extend current configuration ${e}`);return t}};d=e([t.Service()],d),exports.StartTask=d;
},{"../core/services/args.service":"core/services/args.service.ts","../core/services/config.service":"core/services/config.service.ts","../core/services/environment.service":"core/services/environment.service.ts","../core/services/exec.service":"core/services/exec.service.ts","../core/helpers":"core/helpers/index.ts"}],"tasks/new.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,i,t,r){var s,c=arguments.length,n=c<3?i:null===r?r=Object.getOwnPropertyDescriptor(i,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,i,t,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(c<3?s(n):c>3?s(i,t,n):s(i,t))||n);return c>3&&n&&Object.defineProperty(i,t,n),n},i=this&&this.__awaiter||function(e,i,t,r){return new(t||(t=Promise))(function(s,c){function n(e){try{a(r.next(e))}catch(i){c(i)}}function o(e){try{a(r.throw(e))}catch(i){c(i)}}function a(e){e.done?s(e.value):new t(function(i){i(e.value)}).then(n,o)}a((r=r.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("typedi"),r=require("../core/services/args.service"),s=require("../core/services/exec.service");let c=class{constructor(){this.execService=t.Container.get(s.ExecService),this.argsService=t.Container.get(r.ArgsService),this.repoLinks={basic:"https://github.com/Stradivario/gapi-starter",advanced:"https://github.com/Stradivario/gapi-starter-postgres-sequelize",microservices:"https://github.com/Stradivario/gapi-starter-microservices",serverless:"https://github.com/Stradivario/gapi-starter-serverless",serverlessSequelize:"https://github.com/Stradivario/gapi-starter-serverless-sequelize",rxdiServer:"https://github.com/rxdi/starter-server-side",rxdiClient:"https://github.com/rxdi/starter-client-side",rxdiClientAdvanced:"https://github.com/rxdi/starter-client-side-advanced",rxdiNeoTypescript:"https://github.com/rxdi/starter-neo4j-typescript",rxdiNeoJavascript:"https://github.com/rxdi/starter-neo4j-javascript",rxdiNeoComplex:"https://github.com/rxdi/starter-neo4j-typescript-complex"}}run(){return i(this,void 0,void 0,function*(){this.argsService.args.toString().includes("--advanced")?yield this.exec(this.repoLinks.advanced):this.argsService.args.toString().includes("--microservices")?yield this.exec(this.repoLinks.microservices):this.argsService.args.toString().includes("--serverless-sequelize")?yield this.exec(this.repoLinks.serverlessSequelize):this.argsService.args.toString().includes("--serverless")?yield this.exec(this.repoLinks.serverless):this.argsService.args.toString().includes("--rxdi-server")?yield this.exec(this.repoLinks.rxdiServer):this.argsService.args.toString().includes("--rxdi-client")?yield this.exec(this.repoLinks.rxdiClient):this.argsService.args.toString().includes("--rxdi-client-advanced")?yield this.exec(this.repoLinks.rxdiClientAdvanced):this.argsService.args.toString().includes("--neo4j-typescript")?yield this.exec(this.repoLinks.rxdiNeoTypescript):this.argsService.args.toString().includes("--neo4j-javascript")?yield this.exec(this.repoLinks.rxdiNeoJavascript):this.argsService.args.toString().includes("--neo4j-complex")?yield this.exec(this.repoLinks.rxdiNeoComplex):yield this.exec(this.repoLinks.basic,'echo basic example uses ts-node and @gapi/cli installed internally because of Heroku easy deployment button. To uninstall ts-node and @gapi/cli type "npm uninstall ts-node @gapi/cli"')})}exec(e,t=""){return i(this,void 0,void 0,function*(){yield this.execService.call(`git clone ${e} ${process.argv[3]} && cd ./${process.argv[3]} && npm install ${t?`&& ${t}`:""}`)})}};c=e([t.Service()],c),exports.NewTask=c;
},{"../core/services/args.service":"core/services/args.service.ts","../core/services/exec.service":"core/services/exec.service.ts"}],"tasks/test.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,i,t,n){var r,s=arguments.length,c=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,i,t,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(c=(s<3?r(c):s>3?r(i,t,c):r(i,t))||c);return s>3&&c&&Object.defineProperty(i,t,c),c},i=this&&this.__awaiter||function(e,i,t,n){return new(t||(t=Promise))(function(r,s){function c(e){try{g(n.next(e))}catch(i){s(i)}}function o(e){try{g(n.throw(e))}catch(i){s(i)}}function g(e){e.done?r(e.value):new t(function(i){i(e.value)}).then(c,o)}g((n=n.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("typedi"),n=require("../core/services/args.service"),r=require("../core/services/config.service"),s=require("../core/services/exec.service"),c=require("../core/services/environment.service");let o=class{constructor(){this.execService=t.Container.get(s.ExecService),this.argsService=t.Container.get(n.ArgsService),this.configService=t.Container.get(r.ConfigService),this.environmentService=t.Container.get(c.EnvironmentVariableService),this.config="",this.verbose=""}run(){return i(this,void 0,void 0,function*(){if(this.args=this.argsService.args.toString(),this.setConfig(),this.setSleep(),this.args.includes("--verbose")&&(this.verbose=" --verbose"),console.log(this.config),this.args.includes("--before")){this.config+="&& export BEFORE_HOOK=true";try{yield this.execService.call(`${this.config} && ts-node ${process.cwd()}/src/test.ts`)}catch(e){console.error(`ERROR: Terminal exited with STATUS ${e} tests will not be runned check ${process.argv[4]?process.argv[4]:"/src/test.ts"}, appropriate exit code is 0`),process.exit(1)}yield this.execService.call(`${this.config} && jest`),console.log("SUCCESS")}else{if(this.args.includes("--watch"))try{yield this.execService.call(`nodemon --watch '${process.cwd()}/src/**/*.ts' --ignore '${this.configService.config.config.schema.introspectionOutputFolder}/' --exec '${this.config} && npm run lint && jest' ${this.verbose}`,{async:!0})}catch(e){process.exit(1)}else try{yield this.execService.call(`${this.config} && npm run lint && jest`)}catch(e){return process.exit(1)}console.log("SUCCESS")}})}setSleep(){this.config+="&& sleep 0"}setConfig(){if(this.argsService.args[3]){const e=this.argsService.args[3].replace("--",""),i=this.configService.config.config.test[e];i?(this.extendOrDefault(i),console.log(`"${e}" configuration loaded!`)):("watch"!==e&&"before"!==e&&console.log(`Missing "${e}" argument configuration inside gapi-cli.conf.yml > config > test switching to "local" configuration.`),this.extendOrDefault(this.configService.config.config.test.local))}else this.extendOrDefault(this.configService.config.config.test.local)}extendOrDefault(e){e.constructor===String&&e.includes("extends")?this.config=this.environmentService.setVariables(this.extendConfig(e)):this.config=this.environmentService.setVariables(e)}extendConfig(e){const i=e.split(" ")[1].split("/"),t=this.configService.config.config[i[0]][i[1]];if(!t)throw new Error(`Cannot extend current configuration ${e}`);return t}validateConfig(e){if(!this.configService.config.config.test[e])throw new Error("Missing test config inside gapi-cli.conf.yml");if(!this.configService.config.config.test[e].db_host)throw new Error("Missing variable db_host inside gapi-cli.conf.yml");if(!this.configService.config.config.test[e].db_name)throw new Error("Missing variable db_name inside gapi-cli.conf.yml");if(!this.configService.config.config.test[e].db_pass)throw new Error("Missing variable db_password inside gapi-cli.conf.yml");if(!this.configService.config.config.test[e].db_port)throw new Error("Missing variable db_port inside gapi-cli.conf.yml");if(!this.configService.config.config.test[e].db_user)throw new Error("Missing variable db_user inside gapi-cli.conf.yml");if(!this.configService.config.config.test[e].endpoint)throw new Error("Missing variable endpoint inside gapi-cli.conf.yml");if(!this.configService.config.config.test[e].token)throw new Error("Missing variable token inside gapi-cli.conf.yml")}};o=e([t.Service()],o),exports.TestTask=o;
},{"../core/services/args.service":"core/services/args.service.ts","../core/services/config.service":"core/services/config.service.ts","../core/services/exec.service":"core/services/exec.service.ts","../core/services/environment.service":"core/services/environment.service.ts"}],"tasks/schema.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},t=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))(function(r,n){function o(e){try{l(s.next(e))}catch(t){n(t)}}function c(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(o,c)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("typedi"),s=require("../core/services/args.service"),r=require("../core/services/exec.service"),n=require("../core/services/config.service"),o=require("fs");let c=class{constructor(){this.execService=i.Container.get(r.ExecService),this.argsService=i.Container.get(s.ArgsService),this.configService=i.Container.get(n.ConfigService)}run(){return t(this,void 0,void 0,function*(){this.folder=this.configService.config.config.schema.introspectionOutputFolder,this.endpoint=this.configService.config.config.schema.introspectionEndpoint,this.pattern=this.configService.config.config.schema.pattern,this.node_modules=__dirname.replace("dist/tasks","node_modules"),this.bashFolder=__dirname.replace("dist/tasks","bash"),"introspect"===process.argv[3]&&(this.createDir(),yield this.generateSchema(),console.log(`Typings introspection based on GAPI Schema created inside folder: ${this.folder}/index.d.ts`)),("collect"===process.argv[3]||this.argsService.args.includes("--collect-documents"))&&(this.createDir(),yield this.collectQueries(),console.log(`Schema documents created inside folder: ${this.folder}/documents.json`)),console.log("To change export folder for this command you need to check this link https://github.com/Stradivario/gapi-cli/wiki/schema")})}createDir(){o.existsSync(this.folder)||o.mkdirSync(this.folder)}collectQueries(){return t(this,void 0,void 0,function*(){yield this.execService.call(`node ${this.node_modules}/graphql-document-collector/bin/graphql-document-collector '${this.pattern?this.pattern:"**/*.graphql"}' > ${this.folder}/documents-temp.json`);const e=o.readFileSync(`${this.folder}/documents-temp.json`,"utf-8");this.argsService.args.includes("--collect-types")&&this.generateTypes(e);const t=`/* tslint:disable */ \n export const DOCUMENTS = ${e}`;o.writeFileSync(`${this.folder}/documents.ts`,t,"utf8"),o.unlinkSync(`${this.folder}/documents-temp.json`)})}generateSchema(){return t(this,void 0,void 0,function*(){yield this.execService.call(`export NODE_TLS_REJECT_UNAUTHORIZED=0 && node ${this.node_modules}/apollo-codegen/lib/cli.js introspect-schema ${this.endpoint} --output ${this.folder}/schema.json`,{async:!0}),yield this.execService.call(`export NODE_TLS_REJECT_UNAUTHORIZED=0 && node  ${this.bashFolder}/gql2ts/index.js ${this.folder}/schema.json -o ${this.folder}/index.ts`,{async:!0})})}generateTypes(e){return t(this,void 0,void 0,function*(){const t=[];Object.keys(JSON.parse(e)).forEach(e=>{const i=e.lastIndexOf("/"),s=e.substring(i+1);"ListMovies.graphql"!==s&&"Place.graphql"!==s&&"Movie.graphql"!==s&&t.push(s)});const i=`\nfunction strEnum<T extends string>(o: Array<T>): {[K in T]: K} {\n    return o.reduce((res, key) => {\n        res[key] = key;\n        return res;\n    }, Object.create(null));\n}\nexport const DocumentTypes = strEnum(${JSON.stringify(t).replace(/"/g,"'").replace(/,/g,",\n")});\nexport type DocumentTypes = keyof typeof DocumentTypes;`;o.writeFileSync(`${this.folder}/documentTypes.ts`,i,"utf8")})}};c=e([i.Service()],c),exports.SchemaTask=c;
},{"../core/services/args.service":"core/services/args.service.ts","../core/services/exec.service":"core/services/exec.service.ts","../core/services/config.service":"core/services/config.service.ts"}],"core/services/readline.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,n){var i,c=arguments.length,o=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(c<3?i(o):c>3?i(t,r,o):i(t,r))||o);return c>3&&o&&Object.defineProperty(t,r,o),o},t=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,c){function o(e){try{a(n.next(e))}catch(t){c(t)}}function s(e){try{a(n.throw(e))}catch(t){c(t)}}function a(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("typedi"),n=require("readline");let i=class{createReadlineInterface(){return n.createInterface({input:process.stdin,output:process.stdout})}clearScreenDown(){return t(this,void 0,void 0,function*(){return n.clearScreenDown(process.stdin)})}createQuestion(e,r){return t(this,void 0,void 0,function*(){return new Promise(t=>{this.readline=this.createReadlineInterface(),this.readline.question(e,e=>{try{r(e)}catch(n){console.error("Missing question internal library error!")}this.readline.close(),t()})})})}};i=e([r.Service()],i),exports.ReadlineService=i;
},{}],"tasks/deploy.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,i,t,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,i,t,s);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(r<3?n(o):r>3?n(i,t,o):n(i,t))||o);return r>3&&o&&Object.defineProperty(i,t,o),o},i=this&&this.__awaiter||function(e,i,t,s){return new(t||(t=Promise))(function(n,r){function o(e){try{a(s.next(e))}catch(i){r(i)}}function c(e){try{a(s.throw(e))}catch(i){r(i)}}function a(e){e.done?n(e.value):new t(function(i){i(e.value)}).then(o,c)}a((s=s.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("typedi"),s=require("../core/services/readline.service"),n=require("chalk"),r=require("cli-spinner").Spinner;function o(e){return e.reduce((e,i)=>(e[i]=i,e),Object.create(null))}exports.QuestionsType=o(["username","password","project"]);class c{}let a=class{constructor(){this.readlineService=t.Container.get(s.ReadlineService),this.deploy_config=new c,this.spinner=new r}run(){return i(this,void 0,void 0,function*(){this.spinner.setSpinnerString(17);try{yield this.usernameQuestion(),yield this.passwordQuestion(),yield this.projectQuestion(),console.log("Deploy Success!")}catch(e){console.log("Deploy Error!")}process.exit(0)})}passwordQuestion(){return i(this,void 0,void 0,function*(){yield this.readlineService.createQuestion("Password: ",this.passwordTask.bind(this)),yield this.validateUserConfig(exports.QuestionsType.password)})}projectQuestion(){return i(this,void 0,void 0,function*(){yield this.readlineService.createQuestion("Project name: ",this.projectTask.bind(this)),yield this.validateUserConfig(exports.QuestionsType.project)})}usernameQuestion(){return i(this,void 0,void 0,function*(){yield this.readlineService.createQuestion("Username: ",this.usernameTask.bind(this)),yield this.validateUserConfig(exports.QuestionsType.username)})}usernameTask(e){this.deploy_config.username=e}projectTask(e){this.deploy_config.project=e}passwordTask(e){this.deploy_config.password=e}validateUserConfig(e){return i(this,void 0,void 0,function*(){process.stdout.write("[2J"),process.stdout.write(`Current configuration: ${JSON.stringify(this.deploy_config,null,4)} \n\n\n\n\n`),this.deploy_config[e]||(console.log(n.red(`Missing ${e} please fill your ${e}!`)),yield this[`${e}Question`](),yield this.validateUserConfig(e))})}};a=e([t.Service()],a),exports.DeployTask=a;
},{"../core/services/readline.service":"core/services/readline.service.ts"}],"tasks/build.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,i){var n,c=arguments.length,o=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(c<3?n(o):c>3?n(t,r,o):n(t,r))||o);return c>3&&o&&Object.defineProperty(t,r,o),o},t=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,c){function o(e){try{a(i.next(e))}catch(t){c(t)}}function s(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(o,s)}a((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("typedi"),i=require("../core/services/config.service"),n=require("fs"),c=require("./start");let o=class{constructor(){this.startTask=r.Container.get(c.StartTask),this.configService=r.Container.get(i.ConfigService)}run(){return t(this,void 0,void 0,function*(){const e=process.cwd(),t=process.argv[4]?process.argv[4].split("--path=")[1]:null,r=n.existsSync(`${e}/${t}`);console.log(this.configService.config.config.app.local),this.startTask.prepareBundler(`${r?`${e}/${r?t:"index.ts"}`:`${e}/src/main.ts`}`,this.configService.config.config.app.local)})}};o=e([r.Service()],o),exports.BuildTask=o;
},{"../core/services/config.service":"core/services/config.service.ts","./start":"tasks/start.ts"}],"core/helpers/ps-list.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,i,t,r){return new(t||(t=Promise))(function(n,s){function o(e){try{m(r.next(e))}catch(i){s(i)}}function p(e){try{m(r.throw(e))}catch(i){s(i)}}function m(e){e.done?n(e.value):new t(function(i){i(e.value)}).then(o,p)}m((r=r.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("util"),t=require("path"),r=require("child_process"),n=1e7,s=()=>e(this,void 0,void 0,function*(){const e=t.join(__dirname,"fastlist.exe"),{stdout:n}=yield i.promisify(r.execFile)(e,{maxBuffer:1e7});return n.trim().split("\r\n").map(e=>e.split("\t")).map(([e,i,t])=>({name:e,pid:Number.parseInt(i,10),ppid:Number.parseInt(t,10)}))}),o=(n={all:null})=>e(this,void 0,void 0,function*(){const s=(!1===n.all?"":"a")+"wwxo",o={};return yield Promise.all(["comm","args","ppid","uid","%cpu","%mem"].map(t=>e(this,void 0,void 0,function*(){const{stdout:e}=yield i.promisify(r.execFile)("ps",[s,`pid,${t}`],{maxBuffer:1e7});for(let i of e.trim().split("\n").slice(1)){i=i.trim();const[e]=i.split(" ",1),r=i.slice(e.length+1).trim();void 0===o[e]&&(o[e]={}),o[e][t]=r}}))),Object.entries(o).filter(([,e])=>e.comm&&e.args&&e.ppid&&e.uid&&e["%cpu"]&&e["%mem"]).map(([e,i])=>({pid:Number.parseInt(e,10),name:t.basename(i.comm),cmd:i.args,ppid:Number.parseInt(i.ppid,10),uid:Number.parseInt(i.uid,10),cpu:Number.parseFloat(i["%cpu"]),memory:Number.parseFloat(i["%mem"])}))});exports.getProcessList="win32"===process.platform?s:o;
},{}],"core/helpers/stringEnum.ts":[function(require,module,exports) {
"use strict";function e(e){return e.reduce((e,t)=>(e[t]=t,e),Object.create(null))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.strEnum=e;
},{}],"tasks/daemon.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,i,t,o){var s,n=arguments.length,r=n<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(i,t,r):s(i,t))||r);return n>3&&r&&Object.defineProperty(i,t,r),r},i=this&&this.__awaiter||function(e,i,t,o){return new(t||(t=Promise))(function(s,n){function r(e){try{l(o.next(e))}catch(i){n(i)}}function a(e){try{l(o.throw(e))}catch(i){n(i)}}function l(e){e.done?s(e.value):new t(function(i){i(e.value)}).then(r,a)}l((o=o.apply(e,i||[])).next())})},t=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i.default=e,i};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("typedi"),s=require("fs"),n=require("child_process"),r=require("mkdirp"),a=require("os"),l=require("util"),d=t(require("rimraf")),c=require("../core/helpers/ps-list"),u=require("../core/helpers/stringEnum"),h=require("../core/helpers");exports.DaemonTasks=u.strEnum(["start","stop","clean","kill"]);let p=class{constructor(){this.gapiFolder=`${a.homedir()}/.gapi`,this.daemonFolder=`${this.gapiFolder}/daemon`,this.outLogFile=`${this.daemonFolder}/out.log`,this.errLogFile=`${this.daemonFolder}/err.log`,this.pidLogFile=`${this.daemonFolder}/pid`,this.start=(()=>i(this,void 0,void 0,function*(){yield this.killDaemon(),yield l.promisify(r)(this.daemonFolder);const e=n.spawn("sleep",["5"],{detached:!0,stdio:["ignore",s.openSync(this.outLogFile,"a"),s.openSync(this.errLogFile,"a")]});yield l.promisify(s.writeFile)(this.pidLogFile,e.pid,{encoding:"utf-8"}),console.log("DAEMON STARTED!",`\nPID: ${e.pid}`),e.unref()})),this.stop=(()=>this.killDaemon()),this.kill=(e=>process.kill(Number(e))),this.clean=(()=>l.promisify(d)(this.daemonFolder)),this.genericRunner=(e=>()=>this[e](h.nextOrDefault(e,""))),this.tasks=new Map([[exports.DaemonTasks.start,this.genericRunner(exports.DaemonTasks.start)],[exports.DaemonTasks.stop,this.genericRunner(exports.DaemonTasks.stop)],[exports.DaemonTasks.clean,this.genericRunner(exports.DaemonTasks.clean)],[exports.DaemonTasks.kill,this.genericRunner(exports.DaemonTasks.kill)]])}run(){return i(this,void 0,void 0,function*(){return h.includes(exports.DaemonTasks.clean)?(console.log(`Cleaning daemon garbage inside ${this.daemonFolder}!`),yield this.tasks.get(exports.DaemonTasks.clean)()):h.includes(exports.DaemonTasks.start)?(console.log(`Stating daemon! Garbage is inside ${this.daemonFolder}!`),yield this.tasks.get(exports.DaemonTasks.start)()):h.includes(exports.DaemonTasks.stop)?(console.log(`Stopping daemon! Garbage is inside ${this.daemonFolder}!`),yield this.tasks.get(exports.DaemonTasks.stop)()):h.includes(exports.DaemonTasks.kill)?yield this.tasks.get(exports.DaemonTasks.kill)():void console.log("Missing command for Daemon")})}killDaemon(){return i(this,void 0,void 0,function*(){const e=yield this.readPidDaemonConfig();e?(console.log(yield this.isDaemonRunning(e)),(yield this.isDaemonRunning(e))&&(console.log(`Daemon process ${e} Killed!`),process.kill(e))):console.log("Daemon is not running!")})}readPidDaemonConfig(){return i(this,void 0,void 0,function*(){let e;try{e=Number(yield l.promisify(s.readFile)(this.pidLogFile,{encoding:"utf-8"}))}catch(i){}return e})}isDaemonRunning(e){return i(this,void 0,void 0,function*(){return!!e&&!!(yield this.getActiveDaemon(e)).length})}getActiveDaemon(e){return i(this,void 0,void 0,function*(){return(yield c.getProcessList()).filter(i=>i.pid===e)})}};p=e([o.Service()],p),exports.DaemonTask=p;
},{"../core/helpers/ps-list":"core/helpers/ps-list.ts","../core/helpers/stringEnum":"core/helpers/stringEnum.ts","../core/helpers":"core/helpers/index.ts"}],"tasks/generate/ui/banner.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BANNER="\n _   _             _      ___  _____  _____  _     _____\n| \\ | |           | |    |_  |/  ___|/  __ \\| |   |_   _|\n|  \\| |  ___  ___ | |_     | |\\ `--. | /  \\/| |     | |\n| . ` | / _ \\/ __|| __|    | | `--. \\| |    | |     | |\n| |\\  ||  __/\\__ \\| |_ /\\__/ //\\__/ /| \\__/\\| |_____| |_\n\\_| \\_/ \\___||___/ \\__|\\____/ \\____/  \\____/\\_____/\\___/\n\n";
},{}],"tasks/generate/ui/emojis.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("node-emoji");exports.emojis={HEART:e.get("heart"),COFFEE:e.get("coffee"),BEER:e.get("beer"),BROKEN_HEART:e.get("broken_heart"),CRYING:e.get("crying_cat_face"),HEART_EYES:e.get("heart_eyes_cat"),JOY:e.get("joy_cat"),KISSING:e.get("kissing_cat"),SCREAM:e.get("scream_cat"),ROCKET:e.get("rocket"),SMIRK:e.get("smirk_cat"),RAISED_HANDS:e.get("raised_hands"),POINT_RIGHT:e.get("point_right"),ZAP:e.get("zap"),BOOM:e.get("boom"),PRAY:e.get("pray"),WINE:e.get("wine_glass")};
},{}],"tasks/generate/ui/messages.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const o=e(require("chalk")),A=require("./emojis");exports.messages={DRY_RUN_MODE:"Command has been executed in the dry mode, nothing changed!",PROJECT_INFORMATION_START:`${A.emojis.ZAP}  We will scaffold your app in a few seconds..`,RUNNER_EXECUTION_ERROR:e=>`Failed to execute command: ${e}`,PACKAGE_MANAGER_QUESTION:`Which package manager would you ${A.emojis.HEART}  to use?`,PACKAGE_MANAGER_INSTALLATION_IN_PROGRESS:`Installation in progress... ${A.emojis.COFFEE}`,PACKAGE_MANAGER_UPDATE_IN_PROGRESS:`Installation in progress... ${A.emojis.COFFEE}`,PACKAGE_MANAGER_UPGRADE_IN_PROGRESS:`Installation in progress... ${A.emojis.COFFEE}`,GIT_INITIALIZATION_ERROR:"Git repository has not been initialized",PACKAGE_MANAGER_INSTALLATION_SUCCEED:e=>`${A.emojis.ROCKET}  Successfully created project ${o.default.green(e)}`,GET_STARTED_INFORMATION:`${A.emojis.POINT_RIGHT}  Get started with the following commands:`,CHANGE_DIR_COMMAND:e=>`$ cd ${e}`,START_COMMAND:e=>`$ ${e} run start`,PACKAGE_MANAGER_INSTALLATION_FAILED:`${A.emojis.SCREAM}  Packages installation failed, see above`,NEST_INFORMATION_PACKAGE_MANAGER_FAILED:`${A.emojis.SMIRK}  cannot read your project package.json file, are you inside your project directory?`};
},{"./emojis":"tasks/generate/ui/emojis.ts"}],"tasks/generate/ui/index.ts":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./banner")),e(require("./emojis")),e(require("./messages"));
},{"./banner":"tasks/generate/ui/banner.ts","./emojis":"tasks/generate/ui/emojis.ts","./messages":"tasks/generate/ui/messages.ts"}],"tasks/generate/runners/abstract.runner.ts":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,c)}u((r=r.apply(t,e||[])).next())})},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const n=e(require("chalk")),r=require("child_process"),i=require("../ui");class o{constructor(t){this.binary=t}run(e,o=!1,s=process.cwd()){return t(this,void 0,void 0,function*(){const t=[e],c={cwd:s,stdio:o?"pipe":"inherit",shell:!0};return new Promise((s,u)=>{const a=r.spawn(`${this.binary}`,t,c);o&&a.stdout.on("data",t=>s(t.toString().replace(/\r\n|\n/,""))),a.on("close",t=>{0===t?s(null):(console.error(n.default.red(i.messages.RUNNER_EXECUTION_ERROR(`${this.binary} ${e}`))),u())})})})}}exports.AbstractRunner=o;
},{"../ui":"tasks/generate/ui/index.ts"}],"tasks/generate/runners/schematic.runner.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("path"),r=require("./abstract.runner");class t extends r.AbstractRunner{constructor(){super(`"${e.join(__dirname,"../../../..","node_modules/.bin/schematics")}"`)}}exports.SchematicRunner=t;
},{"./abstract.runner":"tasks/generate/runners/abstract.runner.ts"}],"tasks/generate/generate.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,n){var c,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(c=e[u])&&(i=(o<3?c(i):o>3?c(t,r,i):c(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},t=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(c,o){function i(e){try{s(n.next(e))}catch(t){o(t)}}function u(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){e.done?c(e.value):new r(function(t){t(e.value)}).then(i,u)}s((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("typedi"),n=require("./runners/schematic.runner"),c=require("../../core/helpers/index");let o=class{run(){return t(this,void 0,void 0,function*(){const e=c.includes("--dry-run"),t=c.includes("--force");let r="";var o=process.argv.slice(3);let i="",u=c.nextOrDefault("--source-root","src"),s=c.nextOrDefault("--language","ts"),l=!1;if("c"!==o[0]&&"controller"!==o[0]||(i="controller",l=!0),"s"!==o[0]&&"service"!==o[0]||(i="service",l=!0),"m"!==o[0]&&"module"!==o[0]||(i="module"),"t"!==o[0]&&"type"!==o[0]||(i="type"),"p"!==o[0]&&"provider"!==o[0]||(i="provider"),"s"!==o[0]&&"service"!==o[0]||(i="service"),"g"!==o[0]&&"guard"!==o[0]||(i="guard"),"i"!==o[0]&&"interceptor"!==o[0]||(i="interceptor"),"e"!==o[0]&&"effect"!==o[0]||(i="effect"),"e"!==o[0]&&"effect"!==o[0]||(i="effect"),"pg"!==o[0]&&"plugin"!==o[0]||(i="plugin",r=`--method=${c.nextOrDefault("--method","GET")}`),!i)throw new Error("Method not specified");try{yield(new n.SchematicRunner).run(`@rxdi/schematics:${i} --name=${o[1]} --force=${t} --dryRun=${e} ${l?"--spec":""} --language='${s}' --sourceRoot='${u}' ${r}`)}catch(a){console.log(a)}})}};o=e([r.Service()],o),exports.GenerateTask=o;
},{"./runners/schematic.runner":"tasks/generate/runners/schematic.runner.ts","../../core/helpers/index":"core/helpers/index.ts"}],"core/services/root.service.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,s){var i,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,s);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(n=(a<3?i(n):a>3?i(t,r,n):i(t,r))||n);return a>3&&n&&Object.defineProperty(t,r,n),n},t=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(i,a){function n(e){try{c(s.next(e))}catch(t){a(t)}}function o(e){try{c(s.throw(e))}catch(t){a(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(n,o)}c((s=s.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("typedi"),s=require("shelljs"),i=require("../../tasks/start"),a=require("../services/args.service"),n=require("../../tasks/new"),o=require("./config.service"),c=require("../../tasks/test"),u=require("../../tasks/schema"),g=require("../../tasks/deploy"),l=require("../../tasks/build"),h=require("../../tasks/daemon"),k=require("../../tasks/generate/generate"),d=r.Container.get(a.ArgsService);let f=class{constructor(){this.startTask=r.Container.get(i.StartTask),this.newTask=r.Container.get(n.NewTask),this.testTask=r.Container.get(c.TestTask),this.configService=r.Container.get(o.ConfigService),this.schemaTask=r.Container.get(u.SchemaTask),this.deployTask=r.Container.get(g.DeployTask),this.buildTask=r.Container.get(l.BuildTask),this.generateTask=r.Container.get(k.GenerateTask),this.daemonTask=r.Container.get(h.DaemonTask)}checkForCustomTasks(){return new Promise((e,t)=>{const r=this.configService.config.commands;Object.keys(r).filter(i=>{if(i===d.args[2]){if(r[i][d.args[3]]){if(r[i][d.args[3]].constructor===Array){let t=0;const a=r[i][d.args[3]],n=a.map(e=>{return++t===a.length?e:e+" && "}).toString().replace(/[, ]+/g," ").trim();e(s.exec(n))}else e(s.exec(r[i][d.args[3]]));return!0}t(`Missing custom command ${d.args[3]}`)}}).length||t("There are no tasks related with your command!")})}runTask(){return t(this,void 0,void 0,function*(){if("stop"===d.args[2])return yield this.startTask.run({state:!1});if("start"===d.args[2])return yield this.startTask.run({state:!0});if("build"===d.args[2])return yield this.buildTask.run();if("new"===d.args[2])return yield this.newTask.run();if("test"===d.args[2])return yield this.testTask.run();if("schema"===d.args[2])return yield this.schemaTask.run();if("deploy"===d.args[2])return yield this.deployTask.run();if("generate"===d.args[2]||"g"===d.args[2])return yield this.generateTask.run();if("daemon"===d.args[2])return yield this.daemonTask.run();try{yield this.checkForCustomTasks()}catch(e){console.error(e)}})}};f=e([r.Service()],f),exports.RootService=f;
},{"../../tasks/start":"tasks/start.ts","../services/args.service":"core/services/args.service.ts","../../tasks/new":"tasks/new.ts","./config.service":"core/services/config.service.ts","../../tasks/test":"tasks/test.ts","../../tasks/schema":"tasks/schema.ts","../../tasks/deploy":"tasks/deploy.ts","../../tasks/build":"tasks/build.ts","../../tasks/daemon":"tasks/daemon.ts","../../tasks/generate/generate":"tasks/generate/generate.ts"}],"main.ts":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r.default=e,r};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("typedi"),i=require("./core/services/root.service"),t=require("./core/services/args.service"),o=require("./core/services/config.service"),c=require("yamljs"),s=require("chalk"),n=e(require("figlet")),l=r.Container.get(i.RootService),a=r.Container.get(t.ArgsService),u=r.Container.get(o.ConfigService);let g={};try{g=c.load("gapi-cli.conf.yml")}catch(f){console.error("Missing gapi-cli.conf.yml gapi-cli will be with malfunctioning.")}u.setCustomConfig(g),a.setArguments(process.argv),l.runTask().then().catch(e=>console.error(e)),console.log(s.default.yellow(n.textSync("Gapi",{horizontalLayout:"full"})));
},{"./core/services/root.service":"core/services/root.service.ts","./core/services/args.service":"core/services/args.service.ts","./core/services/config.service":"core/services/config.service.ts"}]},{},["main.ts"], null)
//# sourceMappingURL=/main.js.map